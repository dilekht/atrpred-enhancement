# Data Directory

## Overview

This directory contains the raw and processed data for the ATRPred Enhancement project.

---

## Raw Data

### Files Needed

Place the following files in `data/raw/`:

1. **ra_tot.txt** (Primary dataset)
   - 89 RA patients
   - 352 proteins + clinical variables
   - Complete treatment response data
   - Source: [ATRPred GitHub](https://github.com/ShuklaLab/ATRPred/tree/main/raw_data)

2. **ra_npx.tsv** (Extended cohort)
   - 195 patients total
   - 360 proteins
   - Includes all patients from ra_tot.txt
   - Source: [ATRPred GitHub](https://github.com/ShuklaLab/ATRPred/tree/main/raw_data)

### Download Instructions

**Option 1: Direct Download**

```bash
cd data/raw
wget https://github.com/ShuklaLab/ATRPred/raw/main/raw_data/ra_tot.txt
wget https://github.com/ShuklaLab/ATRPred/raw/main/raw_data/ra_npx.tsv
```

**Option 2: Manual Download**

1. Go to https://github.com/ShuklaLab/ATRPred/tree/main/raw_data
2. Click on each file
3. Click "Download" or "Raw"
4. Save to `data/raw/`

---

## Processed Data

After running the pipeline, these files will be generated in `data/processed/`:

- **X_scaled.csv** - Standardized feature matrix (86 samples × 371 features)
- **y.npy** - Response labels (86 samples)
- **selected_features.json** - Selected features from consensus

These files are automatically generated and should not be uploaded to Git.

---

## Data Format

### ra_tot.txt

**Format**: Space-delimited text file

**Columns**:
- `StudyID`: Patient identifier
- `male`: Gender (1=male, 0=female)
- `age`: Age in years
- `dd`: Disease duration
- `BLDAS`: Baseline DAS28-ESR score
- `delDAS`: Change in DAS28 at 6 months (response measure)
- `nice`: Response classification
- `Protein columns`: 352 proteins (NPX values from Olink)

**Sample size**: 89 patients (86 with complete data)

### ra_npx.tsv

**Format**: Tab-delimited text file

**Columns**:
- `StudyID`: Patient identifier
- `Protein columns`: 360 proteins (NPX values)

**Sample size**: 195 patients (no clinical outcomes)

---

## Citation

Original data from:

> Prasad B, McGeough C, Eakin A, et al. (2022)  
> ATRPred: A machine learning based tool for clinical decision making  
> of anti-TNF treatment in rheumatoid arthritis patients.  
> PLOS Computational Biology 18(7): e1010204.  
> https://doi.org/10.1371/journal.pcbi.1010204

---

## Data Not Included

Due to GitHub file size limitations and licensing:

- Raw data files (`.txt`, `.tsv`) are NOT included in the repository
- Users must download from the original ATRPred repository
- Processed data files are regenerated by the pipeline

---

## Directory Structure

```
data/
├── raw/                          # Original data (download required)
│   ├── README.md                 # This file
│   ├── ra_tot.txt               # Download from ATRPred repo
│   └── ra_npx.tsv               # Download from ATRPred repo
│
└── processed/                    # Generated by pipeline
    ├── X_scaled.csv             # Standardized features
    ├── y.npy                    # Response labels
    └── selected_features.json   # Selected features
```

---

## Verification

After downloading, verify file integrity:

```python
import pandas as pd

# Check ra_tot.txt
df = pd.read_csv('data/raw/ra_tot.txt', sep=' ')
print(f"Shape: {df.shape}")  # Should be (89, 367)
print(f"Columns: {len(df.columns)}")  # Should be 367

# Check ra_npx.tsv
df2 = pd.read_csv('data/raw/ra_npx.tsv', sep='\t')
print(f"Shape: {df2.shape}")  # Should be (195, 361)
```

Expected output:
```
Shape: (89, 367)
Columns: 367
Shape: (195, 361)
```

---

## Troubleshooting

**Problem**: "File not found" error when running pipeline

**Solution**: Make sure you've downloaded the data files to the correct location:
```bash
ls data/raw/
# Should show: ra_tot.txt  ra_npx.tsv
```

**Problem**: "Permission denied" when downloading

**Solution**: Check if the original repository is still public or contact authors

---

For questions about the original data, contact:
- ATRPred authors: https://github.com/ShuklaLab/ATRPred
- Original paper: https://doi.org/10.1371/journal.pcbi.1010204
